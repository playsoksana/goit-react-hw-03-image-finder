(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={SearchForm:"Searchbar_SearchForm__1rwum",Label:"Searchbar_Label__1DSW-",Input:"Searchbar_Input__1B9xD"}},15:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__x0Q5a",Image:"ImageGalleryItem_Image__3IR0N"}},16:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1IL2G",Modal:"Modal_Modal__23mBj"}},18:function(e,t,a){},20:function(e,t,a){e.exports={SearchButton:"ButtonIcon_SearchButton__26k2G"}},21:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__1RU-v"}},22:function(e,t,a){e.exports={Button:"Button_Button__18SQq"}},23:function(e,t,a){e.exports={Image:"Error_Image__1Ec2a"}},48:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(9),s=a.n(o),l=(a(18),a(19)),i=a(2),u=a.n(i),b=a(11),p=a(7),m=a(3),h=a(4),d=a(6),g=a(5),j=a(14),f=a(24),v=a.n(f),O=a(17),x=(a(30),a(20)),y=a.n(x),w=a(1),I=function(e){var t=e.children;return Object(w.jsx)("button",{className:y.a.SearchButton,type:"submit","aria-label":"search",children:t})},S=a(10),_=a.n(S),k=["title","titleId"];function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function C(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function E(e,t){var a=e.title,c=e.titleId,o=C(e,k);return r.createElement("svg",M({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 32 32",ref:t,"aria-labelledby":c},o),void 0===a?r.createElement("title",{id:c},"search"):a?r.createElement("title",{id:c},a):null,n||(n=r.createElement("path",{d:"M31.715 28.953c0.381 0.381 0.381 0.999 0 1.381l-1.381 1.381c-0.382 0.381-1 0.381-1.381 0l-9.668-9.668c-0.105-0.105-0.175-0.229-0.222-0.361-1.983 1.449-4.418 2.314-7.063 2.314-6.627 0-12-5.373-12-12s5.373-12 12-12c6.627 0 12 5.373 12 12 0 2.645-0.865 5.080-2.314 7.063 0.132 0.047 0.256 0.116 0.361 0.222l9.668 9.668zM12 4c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8c0-4.418-3.582-8-8-8z"})))}var B=r.forwardRef(E),F=(a.p,a(32)),L=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchSubject:""},e.onChangeInput=function(t){var a=t.target.value;e.setState({searchSubject:a})},e.submitEventFromForm=function(t){e.props.onSubmit(t),e.reset()},e.reset=function(){e.setState({searchSubject:""})},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.onChangeInput,t=this.state.searchSubject,a=F.generate();return Object(w.jsx)("header",{children:Object(w.jsxs)("form",{onSubmit:this.submitEventFromForm,className:_.a.SearchForm,children:[Object(w.jsx)("label",{htmlFor:a,className:_.a.Label}),Object(w.jsx)("input",{onChange:e,id:a,type:"text",className:_.a.Input,value:t,name:"search",placeholder:"Enter a search word"}),Object(w.jsx)(I,{children:Object(w.jsx)(B,{})})]})})}}]),a}(r.PureComponent),N=a(21),G=a.n(N),U=a(15),D=a.n(U),P=a.p+"static/media/kote-kote.830652e8.jpg",R=function(e){var t=e.prevUrl,a=e.tags,n=e.largeImageURL;return Object(w.jsx)("li",{className:D.a.ImageGalleryItem,children:Object(w.jsx)("img",{alt:a,data:n,className:D.a.Image,src:t})})};R.defaultProps={prevUrl:P};var V,A=R,z=function(e){var t=e.collectionImages,a=e.openModal;return Object(w.jsx)("ul",{onClick:a,className:G.a.ImageGallery,children:t.map((function(e,t){return Object(w.jsx)(A,{largeImageURL:e.largeImageURL,tags:e.tags,prevUrl:e.previewURL},t)}))})},K=a(22),T=a.n(K),q=function(e){var t=e.imageUpload,a=e.text;return Object(w.jsx)("button",{onClick:t,className:T.a.Button,type:"button",children:a})},J=function(){var e=Object(p.a)(u.a.mark((function e(t,a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://pixabay.com/api/","?q=").concat(t,"&page=").concat(a,"&key=").concat("21828776-3a3234db6b008ce4834511463","&").concat("image_type=photo&orientation=horizontal&per_page=12"));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Q=a(16),W=a.n(Q),H=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e.handleBackdropOnClick=function(t){t.target===t.currentTarget&&e.props.closeModal()},e.handleKeyDownOnClick=function(t){"Escape"===t.code&&e.props.closeModal()},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDownOnClick)}},{key:"componentWillMount",value:function(){window.removeEventListener("keydown",this.handleKeyDownOnClick)}},{key:"render",value:function(){var e=this.props.children,t=this.handleBackdropOnClick;return Object(w.jsx)("div",{onClick:t,className:W.a.Overlay,children:Object(w.jsx)("div",{className:W.a.Modal,children:e})})}}]),a}(r.Component),Y=a(23),X=a.n(Y),Z=function(){return Object(w.jsx)("img",{className:X.a.Image,src:P,alt:"not available"})},$=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchSubject:"",collectionImages:[],page:1,showModal:!1,imgForModal:{url:null,alt:null},status:"idle",buttonVisible:!1},e.componentDidUpdate=function(t,a){var n=e.state,r=n.page,c=n.searchSubject;if(r!==a.page){e.setState({status:"loading"});try{Object(p.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J(c,r);case 2:a=t.sent,e.setState((function(e){return{collectionImages:[].concat(Object(b.a)(e.collectionImages),Object(b.a)(a.hits)),status:"resolved",buttonVisible:Math.ceil(a.total/12)!==r}}));case 4:case"end":return t.stop()}}),t)})))()}catch(o){e.setState({status:"error",collectionImages:[],buttonVisible:!1})}}window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.onSubmitForm=function(){var t=Object(p.a)(u.a.mark((function t(a){var n,r,c,o,s,l,i,p;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.target,r=n.search.value,c=e.state,o=c.searchSubject,s=c.page,a.preventDefault(),o.toLowerCase()!==r.toLowerCase()){t.next=6;break}return t.abrupt("return");case 6:if(r.trim().length){t.next=9;break}return O.b.error("Your string consists of only spaces, enter a valid string!"),t.abrupt("return");case 9:return e.setState({page:1,searchSubject:r,status:"loading"}),t.prev=10,t.next=13,J(r,s);case 13:if(l=t.sent,i=l.hits,!((p=l.total)>0)){t.next=19;break}return e.setState({collectionImages:Object(b.a)(i),status:"resolved",buttonVisible:p>13}),t.abrupt("return");case 19:Promise.reject(new Z("Nothing found")),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(10),e.setState({status:"error",collectionImages:[],buttonVisible:!1});case 25:case"end":return t.stop()}}),t,null,[[10,22]])})));return function(e){return t.apply(this,arguments)}}(),e.increment=function(){e.setState((function(e){return{page:e.page+1,buttonVisible:!1}}))},e.openModal=function(t){var a=t.target;a!==t.currentTarget&&e.setState({showModal:!0,imgForModal:{url:a.getAttribute("data"),alt:a.getAttribute("alt")}})},e.closeModal=function(){e.setState({showModal:!1})},e}return Object(h.a)(a,[{key:"render",value:function(){var e=Object(j.css)(V||(V=Object(l.a)(["\n      display: block;\n      margin-left: 50%;\n      border-color: blue;\n    "]))),t=this.onSubmitForm,a=this.openModal,n=this.closeModal,r=this.increment,c=this.state,o=c.collectionImages,s=c.showModal,i=c.imgForModal,u=i.url,b=i.alt,p=c.status,m=c.buttonVisible;return Object(w.jsxs)("div",{children:[Object(w.jsx)(L,{onSubmit:t}),Object(w.jsx)(z,{openModal:a,collectionImages:o}),m&&Object(w.jsx)(q,{imageUpload:r,text:"Load more"}),"loading"===p&&Object(w.jsx)(v.a,{loading:!0,css:e,size:40}),s&&Object(w.jsx)(H,{closeModal:n,children:Object(w.jsx)("img",{src:u,alt:b})}),"error"===p&&Object(w.jsx)(Z,{}),Object(w.jsx)(O.a,{})]})}}]),a}(r.PureComponent);s.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)($,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.86670c04.chunk.js.map