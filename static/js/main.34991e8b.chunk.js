(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={SearchForm:"Searchbar_SearchForm__1rwum",Label:"Searchbar_Label__1DSW-",Input:"Searchbar_Input__1B9xD"}},15:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__x0Q5a",Image:"ImageGalleryItem_Image__3IR0N"}},16:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1IL2G",Modal:"Modal_Modal__23mBj"}},18:function(e,t,a){},20:function(e,t,a){e.exports={SearchButton:"ButtonIcon_SearchButton__26k2G"}},21:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__1RU-v"}},22:function(e,t,a){e.exports={Button:"Button_Button__18SQq"}},23:function(e,t,a){e.exports={Image:"Error_Image__1Ec2a"}},48:function(e,t,a){"use strict";a.r(t);var r,n=a(0),c=a.n(n),o=a(5),s=a.n(o),l=(a(18),a(19)),i=a(2),u=a.n(i),b=a(11),m=a(3),p=a(6),h=a(7),g=a(9),d=a(8),j=a(14),f=a(24),v=a.n(f),O=a(17),x=(a(30),a(20)),I=a.n(x),y=a(1),S=function(e){var t=e.children;return Object(y.jsx)("button",{className:I.a.SearchButton,type:"submit","aria-label":"search",children:t})},_=a(10),w=a.n(_),M=["title","titleId"];function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function F(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function L(e,t){var a=e.title,c=e.titleId,o=F(e,M);return n.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 32 32",ref:t,"aria-labelledby":c},o),void 0===a?n.createElement("title",{id:c},"search"):a?n.createElement("title",{id:c},a):null,r||(r=n.createElement("path",{d:"M31.715 28.953c0.381 0.381 0.381 0.999 0 1.381l-1.381 1.381c-0.382 0.381-1 0.381-1.381 0l-9.668-9.668c-0.105-0.105-0.175-0.229-0.222-0.361-1.983 1.449-4.418 2.314-7.063 2.314-6.627 0-12-5.373-12-12s5.373-12 12-12c6.627 0 12 5.373 12 12 0 2.645-0.865 5.080-2.314 7.063 0.132 0.047 0.256 0.116 0.361 0.222l9.668 9.668zM12 4c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8c0-4.418-3.582-8-8-8z"})))}var N=n.forwardRef(L),B=(a.p,a(32)),E=function(e){Object(g.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={searchSubject:""},e.onChangeInput=function(t){var a=t.target.value;e.setState({searchSubject:a})},e.submitEventFromForm=function(t){e.props.onSubmit(t),e.reset()},e.reset=function(){e.setState({searchSubject:""})},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.onChangeInput,t=this.state.searchSubject,a=B.generate();return Object(y.jsx)("header",{children:Object(y.jsxs)("form",{onSubmit:this.submitEventFromForm,className:w.a.SearchForm,children:[Object(y.jsx)("label",{htmlFor:a,className:w.a.Label}),Object(y.jsx)("input",{onChange:e,id:a,type:"text",className:w.a.Input,value:t,name:"search",placeholder:"Enter a search word"}),Object(y.jsx)(S,{children:Object(y.jsx)(N,{})})]})})}}]),a}(n.PureComponent),G=a(21),U=a.n(G),C=a(15),P=a.n(C),R=a.p+"static/media/kote-kote.830652e8.jpg",V=function(e){var t=e.prevUrl,a=e.tags,r=e.largeImageURL;return Object(y.jsx)("li",{className:P.a.ImageGalleryItem,children:Object(y.jsx)("img",{alt:a,data:r,className:P.a.Image,src:t})})};V.defaultProps={prevUrl:R};var z,A=V,D=function(e){var t=e.collectionImages,a=e.openModal;return Object(y.jsx)("ul",{onClick:a,className:U.a.ImageGallery,children:t.map((function(e,t){return Object(y.jsx)(A,{largeImageURL:e.largeImageURL,tags:e.tags,prevUrl:e.previewURL},t)}))})},T=a(22),q=a.n(T),J=function(e){var t=e.imageUpload;return Object(y.jsx)("button",{onClick:t,className:q.a.Button,type:"button",children:"Load more"})},Q=function(){var e=Object(m.a)(u.a.mark((function e(t,a){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://pixabay.com/api/","?q=").concat(t,"&page=").concat(a,"&key=").concat("21828776-3a3234db6b008ce4834511463","&").concat("image_type=photo&orientation=horizontal&per_page=12"));case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),H=a(16),W=a.n(H),Y=function(e){var t=e.children,a=e.closeModal;return Object(y.jsx)("div",{onClick:a,className:W.a.Overlay,children:Object(y.jsx)("div",{className:W.a.Modal,children:t})})},K=a(23),X=a.n(K),Z=function(){return Object(y.jsx)("img",{className:X.a.Image,src:R,alt:"not available"})},$=function(e){Object(g.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={searchSubject:"",collectionImages:[],page:1,showModal:!1,imgForModal:{url:null,alt:null},status:"idle",buttonVisible:!1},e.componentDidUpdate=function(t,a){var r=e.state,n=r.page,c=r.searchSubject;if(n!==a.page){e.setState({status:"loading"});try{Object(m.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(c,n);case 2:a=t.sent,e.setState((function(e){return{collectionImages:[].concat(Object(b.a)(e.collectionImages),Object(b.a)(a.hits)),status:"resolved",buttonVisible:Math.ceil(a.total/12)!==n}}));case 4:case"end":return t.stop()}}),t)})))()}catch(o){e.setState({status:"error",collectionImages:[],buttonVisible:!1})}}window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.onSubmitForm=function(){var t=Object(m.a)(u.a.mark((function t(a){var r,n,c,o,s,l,i,m;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.target,n=r.search.value,c=e.state,o=c.searchSubject,s=c.page,a.preventDefault(),o.toLocaleLowerCase()!==n.toLocaleLowerCase()){t.next=6;break}return t.abrupt("return");case 6:if(n.trim().length){t.next=9;break}return O.b.error("Your string consists of only spaces, enter a valid string!"),t.abrupt("return");case 9:return e.setState({page:1,searchSubject:n,status:"loading"}),t.prev=10,t.next=13,Q(n,s);case 13:if(l=t.sent,i=l.hits,!((m=l.total)>0)){t.next=19;break}return e.setState({collectionImages:Object(b.a)(i),status:"resolved",buttonVisible:m>13}),t.abrupt("return");case 19:Promise.reject(new Z("Nothing found")),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(10),e.setState({status:"error",collectionImages:[],buttonVisible:!1});case 25:case"end":return t.stop()}}),t,null,[[10,22]])})));return function(e){return t.apply(this,arguments)}}(),e.increment=function(){e.setState((function(e){return{page:e.page+1,buttonVisible:!1}}))},e.openModal=function(t){var a=t.target;a!==t.currentTarget&&e.setState({showModal:!0,imgForModal:{url:a.getAttribute("data"),alt:a.getAttribute("alt")}})},e.closeModal=function(t){t.target===t.currentTarget&&e.setState({showModal:!1})},e}return Object(h.a)(a,[{key:"render",value:function(){var e=Object(j.css)(z||(z=Object(l.a)(["\n      display: block;\n      margin-left: 50%;\n      border-color: blue;\n    "]))),t=this.onSubmitForm,a=this.openModal,r=this.closeModal,n=this.increment,c=this.state,o=c.collectionImages,s=c.showModal,i=c.imgForModal,u=i.url,b=i.alt,m=c.status,p=c.buttonVisible;return Object(y.jsxs)("div",{children:[Object(y.jsx)(E,{onSubmit:t}),Object(y.jsx)(D,{openModal:a,collectionImages:o}),p&&Object(y.jsx)(J,{imageUpload:n}),"loading"===m&&Object(y.jsx)(v.a,{loading:!0,css:e,size:40}),s&&Object(y.jsx)(Y,{closeModal:r,children:Object(y.jsx)("img",{src:u,alt:b})}),"error"===m&&Object(y.jsx)(Z,{}),Object(y.jsx)(O.a,{})]})}}]),a}(n.PureComponent);s.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)($,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.34991e8b.chunk.js.map